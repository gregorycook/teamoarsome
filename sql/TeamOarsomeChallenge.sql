-- phpMyAdmin SQL Dump
-- version 3.3.10.4
-- http://www.phpmyadmin.net
--
-- Host: teamoarsome.cakewood.net
-- Generation Time: Jan 04, 2015 at 03:28 PM
-- Server version: 5.1.56
-- PHP Version: 5.3.27

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";

--
-- Database: `teamoarsome`
--

-- --------------------------------------------------------

--
-- Table structure for table `athlete`
--

DROP TABLE IF EXISTS `athlete`;
CREATE TABLE `athlete` (
  `Id` int(11) NOT NULL AUTO_INCREMENT,
  `Name` varchar(50) NOT NULL,
  `Gender` char(1) NOT NULL,
  PRIMARY KEY (`Id`),
  UNIQUE KEY `Name` (`Name`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=14 ;

--
-- Dumping data for table `athlete`
--

INSERT INTO `athlete` (`Id`, `Name`, `Gender`) VALUES
(1, 'Gregory', 'M'),
(2, 'Arlene', 'F'),
(10, '', 'M'),
(4, 'Dave C', 'M'),
(5, 'Adrian', 'M'),
(6, 'Rocky', 'M'),
(7, 'Andy B', 'M'),
(8, 'Larry', 'M'),
(9, 'Kay', 'F'),
(11, 'Si', 'M'),
(12, 'Navigation Hazard', 'M'),
(13, 'Dave Speed', 'M');

-- --------------------------------------------------------

--
-- Table structure for table `attempt`
--

DROP TABLE IF EXISTS `attempt`;
CREATE TABLE `attempt` (
  `Id` int(11) NOT NULL AUTO_INCREMENT,
  `AthleteId` int(11) NOT NULL,
  `ChallengeId` int(11) NOT NULL,
  `Distance` int(11) NOT NULL,
  `Time` decimal(6,1) NOT NULL,
  `Weight` enum('L','H') NOT NULL,
  `Entered` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `SPM` int(11) NOT NULL,
  `PacePoints` int(11) NOT NULL DEFAULT '0',
  `GainPoints` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`Id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=171 ;

--
-- Dumping data for table `attempt`
--

INSERT INTO `attempt` (`Id`, `AthleteId`, `ChallengeId`, `Distance`, `Time`, `Weight`, `Entered`, `SPM`, `PacePoints`, `GainPoints`) VALUES
(21, 5, 17, 15000, 3953.0, 'H', '2014-04-24 06:34:19', 24, 2, 0),
(22, 2, 16, 7007, 1800.0, 'L', '2014-04-26 18:38:27', 26, 2, 0),
(20, 6, 17, 15000, 3327.1, 'H', '2014-04-24 06:32:53', 22, 3, 0),
(11, 4, 16, 8300, 1800.0, 'H', '2014-04-20 11:59:59', 31, 6, 1),
(12, 6, 16, 8345, 1800.0, 'H', '2014-04-21 11:57:28', 24, 8, 0),
(119, 1, 16, 8213, 1800.0, 'L', '2014-06-02 17:30:16', 25, 5, 0),
(14, 7, 16, 8138, 1800.0, 'H', '2014-04-22 02:32:57', 25, 3, 0),
(15, 8, 16, 8195, 1800.0, 'H', '2014-04-22 02:33:10', 27, 4, 0),
(16, 9, 16, 6766, 1800.0, 'H', '2014-04-23 04:18:03', 28, 1, 2),
(91, 4, 17, 15000, 3318.0, 'H', '2014-05-29 11:01:42', 25, 4, 0),
(18, 9, 17, 15000, 4210.1, 'H', '2014-04-24 06:30:21', 27, 1, 0),
(109, 4, 18, 8456, 1800.0, 'H', '2014-06-02 17:25:48', 27, 4, 2),
(24, 9, 18, 6799, 1800.0, 'H', '2014-04-27 21:41:54', 27, 1, 4),
(93, 6, 18, 8554, 1800.0, 'H', '2014-05-29 11:02:04', 24, 5, 3),
(26, 5, 18, 6997, 1800.0, 'H', '2014-04-27 21:43:09', 24, 2, 1),
(27, 7, 18, 8377, 1800.0, 'H', '2014-04-27 21:43:29', 27, 3, 0),
(110, 4, 19, 10000, 2191.1, 'H', '2014-06-02 17:26:26', 25, 3, 2),
(29, 9, 19, 10000, 2842.0, 'H', '2014-04-27 21:45:02', 27, 1, 1),
(30, 5, 19, 10000, 2364.0, 'H', '2014-04-27 21:45:44', 25, 2, 3),
(59, 11, 16, 8342, 1800.0, 'H', '2014-04-29 10:08:35', 20, 7, 0),
(111, 4, 20, 5031, 1020.0, 'H', '2014-06-02 17:26:52', 27, 3, 1),
(33, 9, 20, 4003, 1020.0, 'H', '2014-04-27 21:48:03', 29, 1, 2),
(95, 6, 20, 5050, 1020.0, 'H', '2014-05-29 11:03:07', 24, 4, 0),
(36, 7, 20, 4972, 1020.0, 'H', '2014-04-27 21:51:02', 30, 2, 0),
(37, 4, 21, 6000, 1278.0, 'H', '2014-04-27 21:51:46', 30, 4, 4),
(38, 9, 21, 6000, 1654.1, 'H', '2014-04-27 21:52:39', 25, 1, 2),
(112, 6, 21, 6000, 1275.0, 'H', '2014-06-02 17:27:22', 24, 5, 3),
(40, 5, 21, 6000, 1439.1, 'H', '2014-04-27 21:53:42', 20, 2, 0),
(41, 7, 21, 6000, 1383.1, 'H', '2014-04-27 21:54:13', 20, 3, 1),
(97, 4, 22, 5192, 600.0, 'H', '2014-05-29 11:04:13', 28, 3, 3),
(43, 9, 22, 2525, 600.0, 'H', '2014-04-27 21:55:00', 33, 1, 2),
(113, 5, 22, 2891, 600.0, 'H', '2014-06-02 17:27:48', 28, 2, 1),
(114, 4, 23, 3000, 610.0, 'H', '2014-06-02 17:28:14', 29, 3, 1),
(46, 9, 23, 3000, 755.1, 'H', '2014-04-27 21:58:32', 29, 1, 2),
(47, 5, 23, 3000, 648.0, 'H', '2014-04-27 21:59:04', 28, 2, 3),
(98, 7, 23, 3000, 604.0, 'H', '2014-05-29 11:04:54', 30, 4, 0),
(115, 4, 24, 7959, 1800.0, 'H', '2014-06-02 17:28:33', 20, 2, 2),
(116, 4, 25, 4000, 775.1, 'H', '2014-06-02 17:29:04', 32, 2, 1),
(117, 4, 26, 2000, 396.5, 'H', '2014-06-02 17:29:31', 32, 4, 1),
(118, 4, 27, 500, 88.0, 'H', '2014-06-02 17:29:54', 45, 2, 2),
(101, 1, 26, 2000, 413.1, 'L', '2014-05-29 11:06:37', 29, 3, 0),
(58, 2, 26, 2000, 463.0, 'L', '2014-04-28 06:28:18', 32, 2, 0),
(60, 6, 28, 9000, 1924.0, 'H', '2014-05-01 12:12:05', 22, 7, 0),
(105, 1, 28, 9000, 1967.5, 'L', '2014-06-01 13:07:02', 26, 5, 0),
(62, 9, 27, 500, 117.1, 'H', '2014-05-02 00:22:08', 39, 1, 1),
(63, 9, 26, 2000, 497.1, 'H', '2014-05-02 00:23:17', 31, 1, 2),
(64, 9, 25, 4000, 1023.0, 'H', '2014-05-02 00:25:17', 35, 1, 2),
(65, 9, 24, 6196, 1800.0, 'H', '2014-05-02 00:26:33', 20, 1, 1),
(66, 8, 28, 9000, 1976.0, 'H', '2014-05-04 05:45:45', 26, 4, 0),
(85, 4, 28, 9000, 1944.2, 'H', '2014-05-09 09:56:51', 30, 6, 0),
(120, 11, 28, 9000, 1852.9, 'H', '2014-06-02 17:30:46', 24, 8, 0),
(88, 9, 28, 9000, 2511.9, 'H', '2014-05-25 12:55:33', 27, 1, 0),
(92, 7, 28, 9000, 2013.0, 'H', '2014-05-29 11:02:02', 24, 3, 0),
(103, 2, 28, 9000, 2410.5, 'L', '2014-05-31 15:48:50', 24, 2, 0),
(125, 1, 29, 2400, 453.3, 'L', '2014-06-16 18:14:18', 36, 4, 1),
(122, 7, 29, 2400, 448.8, 'H', '2014-06-02 17:32:35', 36, 5, 5),
(123, 4, 29, 2400, 430.5, 'H', '2014-06-03 08:29:09', 43, 6, 4),
(124, 12, 29, 2400, 481.0, 'H', '2014-06-04 15:40:44', 24, 3, 0),
(126, 11, 29, 2400, 417.5, 'H', '2014-06-20 08:26:15', 38, 7, 2),
(127, 2, 29, 2400, 535.4, 'L', '2014-06-22 17:47:56', 34, 2, 6),
(128, 9, 29, 2400, 589.0, 'H', '2014-06-30 08:58:52', 30, 1, 3),
(129, 4, 30, 750, 140.9, 'H', '2014-07-06 08:26:49', 40, 4, 2),
(131, 1, 30, 750, 145.3, 'L', '2014-07-15 17:32:26', 34, 3, 3),
(132, 2, 30, 750, 180.1, 'L', '2014-07-26 13:47:45', 29, 2, 1),
(133, 9, 30, 750, 181.8, 'H', '2014-07-31 00:33:44', 32, 1, 4),
(134, 7, 31, 5000, 1140.0, 'H', '2014-08-05 06:22:25', 23, 3, 0),
(135, 1, 31, 5000, 1055.2, 'L', '2014-08-06 12:43:09', 29, 5, 4),
(136, 4, 31, 5000, 1048.2, 'H', '2014-08-14 08:36:10', 32, 6, 3),
(139, 6, 31, 5000, 1078.7, 'H', '2014-08-21 11:17:21', 24, 4, 0),
(138, 9, 31, 5000, 1381.0, 'H', '2014-08-21 02:13:40', 26, 1, 1),
(140, 2, 31, 5000, 1349.4, 'L', '2014-08-28 16:24:54', 24, 2, 2),
(147, 1, 32, 15802, 3600.0, 'L', '2014-09-28 17:51:11', 22, 3, 1),
(142, 2, 32, 13160, 3600.0, 'L', '2014-09-10 22:08:14', 23, 2, 5),
(143, 4, 32, 16444, 3600.0, 'H', '2014-09-11 10:31:18', 29, 5, 3),
(145, 6, 32, 15987, 3600.0, 'H', '2014-09-12 10:56:29', 22, 4, 2),
(146, 9, 32, 12661, 3600.0, 'H', '2014-09-26 06:56:25', 25, 1, 4),
(153, 4, 33, 11404, 2520.0, 'H', '2014-10-19 10:39:49', 23, 4, 2),
(149, 6, 33, 11554, 2520.0, 'H', '2014-10-09 11:12:31', 23, 6, 4),
(155, 1, 33, 11411, 2520.0, 'L', '2014-10-29 18:00:10', 23, 5, 3),
(151, 9, 33, 8406, 2520.0, 'H', '2014-10-16 08:12:06', 22, 1, 1),
(154, 2, 33, 9639, 2520.0, 'L', '2014-10-25 18:58:52', 23, 2, 5),
(156, 13, 33, 10077, 2520.0, 'H', '2014-10-31 03:34:21', 24, 3, 0),
(161, 1, 34, 8000, 1693.1, 'L', '2014-11-08 12:09:50', 27, 6, 3),
(158, 13, 34, 8000, 1890.5, 'H', '2014-11-03 11:38:29', 25, 3, 5),
(159, 7, 34, 8000, 1744.0, 'H', '2014-11-06 00:47:20', 26, 4, 0),
(160, 6, 34, 8000, 1676.2, 'H', '2014-11-06 09:52:03', 26, 7, 2),
(162, 4, 34, 8000, 1735.8, 'H', '2014-11-14 13:23:10', 24, 5, 1),
(163, 11, 34, 8000, 1628.0, 'H', '2014-11-28 10:28:53', 24, 8, 0),
(164, 2, 34, 8000, 2011.8, 'L', '2014-11-29 11:23:49', 26, 2, 4),
(165, 9, 34, 8000, 2219.6, 'H', '2014-11-30 08:00:08', 29, 1, 6),
(166, 2, 35, 1000, 238.0, 'L', '2014-12-16 17:16:40', 29, 2, 2),
(167, 4, 35, 1000, 191.4, 'H', '2014-12-20 09:38:17', 32, 5, 5),
(168, 1, 35, 1000, 198.1, 'L', '2014-12-23 13:39:53', 33, 4, 3),
(169, 13, 35, 1000, 218.2, 'H', '2014-12-25 21:48:56', 28, 3, 4),
(170, 9, 35, 1000, 273.0, 'H', '2014-12-28 09:39:54', 28, 1, 1);

-- --------------------------------------------------------

--
-- Table structure for table `challenge`
--

DROP TABLE IF EXISTS `challenge`;
CREATE TABLE `challenge` (
  `Id` int(11) NOT NULL AUTO_INCREMENT,
  `Name` varchar(50) NOT NULL,
  `Month` int(11) NOT NULL,
  `Year` int(11) NOT NULL,
  `Type` enum('D','T') NOT NULL,
  `Description` varchar(255) NOT NULL,
  `Distance` int(11) DEFAULT NULL,
  `Time` decimal(6,1) DEFAULT NULL,
  PRIMARY KEY (`Id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=37 ;

--
-- Dumping data for table `challenge`
--

INSERT INTO `challenge` (`Id`, `Name`, `Month`, `Year`, `Type`, `Description`, `Distance`, `Time`) VALUES
(16, '30 minutes, unrestricted', 4, 2014, 'T', 'Row as many meters as you can in 30 minutes with no rate restrictions!', 0, 1800.0),
(17, '3 x 5K, 5'' rest', 5, 2013, 'D', '3 x 5K, 5'' rest', 15000, 0.0),
(18, '6 x 5'', 2'' rest', 6, 2013, 'T', '6 x 5'', 2'' rest (Enter the meters you rowed in 30'')', NULL, 1800.0),
(19, '10K', 7, 2013, 'D', '10K', 10000, 0.0),
(20, '1''-2''-3''-2''-1''-2''-3''-2''-1'',  R1', 8, 2013, 'T', '1''-2''-3''-2''-1''-2''-3''-2''-1'',  R1  (Enter total meters rowed in 17 minutes.)', NULL, 1020.0),
(21, '6K', 9, 2013, 'D', '6K', 6000, NULL),
(22, '20 x 30", 30" rest', 10, 2013, 'T', '20 x 30", 30" rest', NULL, 600.0),
(23, '4 x 750, 2'' rest', 11, 2013, 'D', '4 x 750, 2'' rest', 3000, NULL),
(24, '30r20', 12, 2013, 'T', '30r20', NULL, 1800.0),
(25, '8 x 500, 2'' rest', 1, 2014, 'D', 'Really, a standard workout?  What kind of challenge is that?', 4000, NULL),
(26, '2K', 2, 2014, 'D', 'HTFU, JFDI, you gotta want it Rita!', 2000, NULL),
(27, '500 meters', 3, 2014, 'D', 'And suffer doing it.', 500, NULL),
(28, '3 x 3K, R3', 5, 2014, 'D', 'Row three 3Ks separated by 3 minutes of restful activity.', 9000, NULL),
(29, '8 x 300, 2'' rest', 6, 2014, 'D', 'Row 8 300s separated by 2'' of restful activity.  Enter your time for the 2400 meters.  Do it very fast!', 2400, NULL),
(30, '750 meters', 7, 2014, 'D', 'Row 750 meters with no rate restrictions', 750, NULL),
(31, '5K', 8, 2014, 'D', '5K, no rate restrictions', 5000, NULL),
(32, '60 minutes', 9, 2014, 'T', 'An hour of power!', NULL, 3600.0),
(33, 'Kay''s Revenge', 10, 2014, 'T', '6'' r20, 5'' r22, 4'' r24, 3'' r26 2'' r28, 1'' r30, 4'' rest, repeat', NULL, 2520.0),
(34, '4 x 2K, 4''', 11, 2014, 'D', '4 x 2K on 4'' rest, enter the time for 8K excluding rest meters.', 8000, NULL),
(35, '1K', 12, 2014, 'D', 'Row a 1K until death or die trying', 1000, NULL),
(36, 'An easier 4 x 1K', 1, 2015, 'D', '1 x (1K, 4'' rest) + 2 x (750, 3'' rest) + 2 x (500, 2'' rest) + 2 x (250, 1'' rest)', 4000, 0.0);

-- --------------------------------------------------------

--
-- Table structure for table `current`
--

DROP TABLE IF EXISTS `current`;
CREATE TABLE `current` (
  `Id` int(11) NOT NULL AUTO_INCREMENT,
  `ChallengeId` int(11) NOT NULL,
  `StartActive` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `EndActive` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`Id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=13 ;

--
-- Dumping data for table `current`
--

INSERT INTO `current` (`Id`, `ChallengeId`, `StartActive`, `EndActive`) VALUES
(1, 16, '2014-04-19 20:57:57', '2014-05-01 07:05:43'),
(2, 17, '2014-05-01 07:05:43', '2014-05-01 07:08:17'),
(3, 28, '2014-05-01 07:08:17', '2014-06-01 07:54:51'),
(4, 17, '2014-06-01 07:54:51', '2014-06-01 07:57:42'),
(5, 29, '2014-06-01 07:57:42', '2014-07-01 22:37:39'),
(6, 30, '2014-07-01 22:37:39', '2014-08-03 18:55:57'),
(7, 31, '2014-08-03 18:55:57', '2014-09-01 21:08:40'),
(8, 32, '2014-09-01 21:08:40', '2014-10-02 21:33:13'),
(9, 33, '2014-10-02 21:33:13', '2014-11-02 20:19:09'),
(10, 34, '2014-11-02 20:19:09', '2014-12-05 20:20:58'),
(11, 35, '2014-12-05 20:20:58', '2015-01-01 22:37:38'),
(12, 36, '2015-01-01 22:41:40', NULL);

-- --------------------------------------------------------

--
-- Stand-in structure for view `summary_points`
--
DROP VIEW IF EXISTS `summary_points`;
CREATE TABLE `summary_points` (
`AthleteId` int(11)
,`ChallengeId` int(11)
,`PacePoints` decimal(32,0)
,`GainPoints` decimal(32,0)
);
-- --------------------------------------------------------

--
-- Structure for view `summary_points`
--
DROP TABLE IF EXISTS `summary_points`;

CREATE ALGORITHM=UNDEFINED DEFINER=`oarsome`@`173.236.128.0/255.255.128.0` SQL SECURITY DEFINER VIEW `summary_points` AS select `a`.`AthleteId` AS `AthleteId`,`c`.`Id` AS `ChallengeId`,sum(`a`.`PacePoints`) AS `PacePoints`,sum(`a`.`GainPoints`) AS `GainPoints` from ((`attempt` `a` join `challenge` `cmain`) join `challenge` `c`) where ((`a`.`ChallengeId` = `cmain`.`Id`) and (((`c`.`Month` <= 4) and (((`cmain`.`Year` = `c`.`Year`) and (`cmain`.`Month` <= `c`.`Month`)) or (((`cmain`.`Year` + 1) = `c`.`Year`) and (`cmain`.`Month` >= 5)))) or ((`c`.`Month` >= 5) and (`cmain`.`Year` = `c`.`Year`) and (`cmain`.`Month` <= `c`.`Month`) and (`cmain`.`Month` >= 5)))) group by `a`.`AthleteId`,`c`.`Id`;
